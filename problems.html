<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìù Problems - LeetCode Anki Card Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }
        .problem-card {
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            border-radius: 15px;
            margin-bottom: 1rem;
            height: 100%;
        }
        .problem-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }
        .tag-btn {
            transition: all 0.3s ease;
            border-radius: 20px;
            font-weight: 500;
            margin: 0.25rem;
            font-size: 0.8rem;
        }
        .tag-btn:hover {
            transform: scale(1.05);
            text-decoration: none;
        }
        .difficulty-badge {
            font-size: 0.8em;
            padding: 0.4em 0.8em;
            border-radius: 12px;
        }
        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
        }
        .filter-section {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .problem-number {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #6c757d;
        }
        .problem-title {
            color: #0d6efd;
            text-decoration: none;
        }
        .problem-title:hover {
            color: #0a58ca;
            text-decoration: underline;
        }
        .acceptance-rate {
            font-size: 0.9rem;
            color: #6c757d;
        }
        .pagination .page-link {
            border-radius: 8px;
            margin: 0 2px;
        }
        .pagination .page-item.active .page-link {
            background-color: #667eea;
            border-color: #667eea;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }
        .test-case {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0 8px 8px 0;
        }
        .insight-item {
            background: #e3f2fd;
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-brain me-2"></i>LeetCode Anki Generator
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="tags.html">Tags</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="problems.html">Problems</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="cards.html">Cards</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/robinali34/leetcode-anki-web" target="_blank">
                            <i class="fab fa-github me-1"></i>GitHub
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container text-center">
            <h1 class="display-4 fw-bold">üìù LeetCode Problems</h1>
            <p class="lead">Browse and filter problems by difficulty, tags, and status</p>
        </div>
    </section>

    <div class="container">
        <!-- Tag Filter Indicator -->
        <div class="row mb-4" id="tag-filter-indicator" style="display: none;">
            <div class="col-12">
                <div class="alert alert-info">
                    <i class="fas fa-filter me-2"></i>
                    <strong>Filtered by tag:</strong> 
                    <span id="current-tag-filter" class="badge bg-primary"></span>
                    <a href="problems.html" class="btn btn-sm btn-outline-primary ms-3">
                        <i class="fas fa-times me-1"></i>Clear Filter
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Statistics Cards -->
        <div class="row mb-4">
            <div class="col-md-3 mb-3">
                <div class="card stats-card text-center">
                    <div class="card-body">
                        <h3 class="card-title" id="total-problems">0</h3>
                        <p class="card-text">Total Problems</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card stats-card text-center">
                    <div class="card-body">
                        <h3 class="card-title" id="easy-count">0</h3>
                        <p class="card-text">Easy</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card stats-card text-center">
                    <div class="card-body">
                        <h3 class="card-title" id="medium-count">0</h3>
                        <p class="card-text">Medium</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card stats-card text-center">
                    <div class="card-body">
                        <h3 class="card-title" id="hard-count">0</h3>
                        <p class="card-text">Hard</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filters Section -->
        <div class="filter-section">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="search-input" class="form-label">Search Problems</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-search"></i></span>
                        <input type="text" class="form-control" id="search-input" placeholder="Problem title or number...">
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="difficulty-filter" class="form-label">Difficulty</label>
                    <select class="form-select" id="difficulty-filter">
                        <option value="">All Difficulties</option>
                        <option value="Easy">Easy</option>
                        <option value="Medium">Medium</option>
                        <option value="Hard">Hard</option>
                    </select>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="tag-filter" class="form-label">Tag</label>
                    <select class="form-select" id="tag-filter">
                        <option value="">All Tags</option>
                    </select>
                </div>
                <div class="col-md-2 mb-3">
                    <label class="form-label">&nbsp;</label>
                    <div class="d-grid">
                        <button class="btn btn-primary" id="apply-filters">
                            <i class="fas fa-filter me-1"></i>Apply
                        </button>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-4 mb-3">
                    <label for="status-filter" class="form-label">Status</label>
                    <select class="form-select" id="status-filter">
                        <option value="">All Statuses</option>
                        <option value="Solved">Solved</option>
                        <option value="Attempted">Attempted</option>
                        <option value="Not Started">Not Started</option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">&nbsp;</label>
                    <div class="d-grid">
                        <button class="btn btn-outline-secondary" id="reset-filters">
                            <i class="fas fa-undo me-1"></i>Reset Filters
                        </button>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">&nbsp;</label>
                    <div class="d-grid">
                        <button class="btn btn-success" id="generate-cards">
                            <i class="fas fa-cards-blank me-1"></i>Generate Cards
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Problems Grid -->
        <div class="row" id="problems-container">
            <!-- Problems will be populated by JavaScript -->
        </div>

        <!-- Pagination -->
        <nav aria-label="Problems pagination" class="mt-4">
            <ul class="pagination justify-content-center" id="pagination">
                <!-- Pagination will be populated by JavaScript -->
            </ul>
        </nav>
    </div>

    <!-- Problem Details Modal -->
    <div class="modal fade" id="problemModal" tabindex="-1" aria-labelledby="modalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Modal content will be populated by JavaScript -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="problems-data.js"></script>
    <script>
        // Use imported problems data
        const sampleProblems = topLeetCodeProblems || [];

        let currentProblems = [...sampleProblems];
        let currentPage = 1;
        const problemsPerPage = 12;

        // Get all unique tags
        const allTags = [...new Set(sampleProblems.flatMap(p => p.tags))].sort();

        function updateStats() {
            const total = currentProblems.length;
            const easy = currentProblems.filter(p => p.difficulty === 'Easy').length;
            const medium = currentProblems.filter(p => p.difficulty === 'Medium').length;
            const hard = currentProblems.filter(p => p.difficulty === 'Hard').length;

            document.getElementById('total-problems').textContent = total;
            document.getElementById('easy-count').textContent = easy;
            document.getElementById('medium-count').textContent = medium;
            document.getElementById('hard-count').textContent = hard;
        }

        function populateTagFilter() {
            const tagFilter = document.getElementById('tag-filter');
            
            // Calculate tag counts
            const tagCounts = {};
            sampleProblems.forEach(problem => {
                if (problem.tags && Array.isArray(problem.tags)) {
                    problem.tags.forEach(tag => {
                        tagCounts[tag] = (tagCounts[tag] || 0) + 1;
                    });
                }
            });
            
            // Sort tags by count (descending)
            const sortedTags = Object.entries(tagCounts).sort((a, b) => b[1] - a[1]);
            
            // Clear existing options
            tagFilter.innerHTML = '<option value="">All Tags</option>';
            
            // Add tag options with counts
            sortedTags.forEach(([tag, count]) => {
                const option = document.createElement('option');
                option.value = tag;
                option.textContent = `${tag} (${count})`;
                tagFilter.appendChild(option);
            });
        }

        function getDifficultyColor(difficulty) {
            switch(difficulty) {
                case 'Easy': return 'success';
                case 'Medium': return 'warning';
                case 'Hard': return 'danger';
                default: return 'secondary';
            }
        }

        function getStatusColor(status) {
            switch(status) {
                case 'Solved': return 'success';
                case 'Attempted': return 'warning';
                case 'Not Started': return 'secondary';
                default: return 'secondary';
            }
        }

        function renderProblems() {
            const container = document.getElementById('problems-container');
            container.innerHTML = '';

            const startIndex = (currentPage - 1) * problemsPerPage;
            const endIndex = startIndex + problemsPerPage;
            const pageProblems = currentProblems.slice(startIndex, endIndex);

            pageProblems.forEach(problem => {
                const problemCard = document.createElement('div');
                problemCard.className = 'col-md-6 col-lg-4';
                problemCard.innerHTML = `
                    <div class="card problem-card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <span class="problem-number">#${problem.id}</span>
                                <span class="badge bg-${getDifficultyColor(problem.difficulty)} difficulty-badge">
                                    ${problem.difficulty}
                                </span>
                            </div>
                            <h6 class="card-title">
                                <a href="#" class="problem-title" onclick="showProblemDetails(${problem.id})">
                                    ${problem.title}
                                </a>
                            </h6>
                            <p class="card-text text-muted small mb-3">
                                ${problem.description ? problem.description.substring(0, 80) + '...' : problem.fullDescription.substring(0, 80) + '...'}
                            </p>
                            <div class="mb-3">
                                ${problem.tags.map(tag => 
                                    `<span class="badge bg-outline-secondary me-1">${tag}</span>`
                                ).join('')}
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="acceptance-rate">
                                    <i class="fas fa-chart-line me-1"></i>${problem.acceptance}%
                                </span>
                                <span class="badge bg-secondary">
                                    Not Started
                                </span>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(problemCard);
            });

            renderPagination();
        }

        function renderPagination() {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';

            const totalPages = Math.ceil(currentProblems.length / problemsPerPage);

            if (totalPages <= 1) return;

            // Previous button
            const prevLi = document.createElement('li');
            prevLi.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
            prevLi.innerHTML = `<a class="page-link" href="#" onclick="changePage(${currentPage - 1})">Previous</a>`;
            pagination.appendChild(prevLi);

            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                const pageLi = document.createElement('li');
                pageLi.className = `page-item ${i === currentPage ? 'active' : ''}`;
                pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage(${i})">${i}</a>`;
                pagination.appendChild(pageLi);
            }

            // Next button
            const nextLi = document.createElement('li');
            nextLi.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
            nextLi.innerHTML = `<a class="page-link" href="#" onclick="changePage(${currentPage + 1})">Next</a>`;
            pagination.appendChild(nextLi);
        }

        function changePage(page) {
            if (page < 1 || page > Math.ceil(currentProblems.length / problemsPerPage)) return;
            currentPage = page;
            renderProblems();
        }

        function applyFilters() {
            const searchQuery = document.getElementById('search-input').value.toLowerCase();
            const difficulty = document.getElementById('difficulty-filter').value;
            const tag = document.getElementById('tag-filter').value;
            const status = document.getElementById('status-filter').value;

            currentProblems = sampleProblems.filter(problem => {
                const matchesSearch = problem.title.toLowerCase().includes(searchQuery) || 
                                    problem.id.toString().includes(searchQuery);
                const matchesDifficulty = !difficulty || problem.difficulty === difficulty;
                const matchesTag = !tag || problem.tags.includes(tag);
                const matchesStatus = !status || true; // Always true since we don't have status in imported data

                return matchesSearch && matchesDifficulty && matchesTag && matchesStatus;
            });

            currentPage = 1;
            updateStats();
            renderProblems();
            
            // Show/hide tag filter indicator
            const tagFilterIndicator = document.getElementById('tag-filter-indicator');
            const currentTagFilter = document.getElementById('current-tag-filter');
            
            if (tag) {
                tagFilterIndicator.style.display = 'block';
                currentTagFilter.textContent = tag;
            } else {
                tagFilterIndicator.style.display = 'none';
            }
        }

        function resetFilters() {
            document.getElementById('search-input').value = '';
            document.getElementById('difficulty-filter').value = '';
            document.getElementById('tag-filter').value = '';
            document.getElementById('status-filter').value = '';

            currentProblems = [...sampleProblems];
            currentPage = 1;
            updateStats();
            renderProblems();
            
            // Hide tag filter indicator
            document.getElementById('tag-filter-indicator').style.display = 'none';
        }

        function showProblemDetails(problemId) {
            const problem = sampleProblems.find(p => p.id === problemId);
            if (!problem) return;

            document.getElementById('modalTitle').innerHTML = `
                <span class="badge bg-${getDifficultyColor(problem.difficulty)} me-2">${problem.difficulty}</span>
                #${problem.id}. ${problem.title}
            `;
            
            document.getElementById('modalBody').innerHTML = `
                <div class="row">
                    <div class="col-md-8">
                        <h6 class="fw-bold">Problem Description</h6>
                        <p class="mb-4">${problem.fullDescription}</p>
                        
                        <h6 class="fw-bold">Test Cases</h6>
                        ${problem.testCases.map(testCase => `
                            <div class="test-case">
                                <div><strong>Input:</strong> ${testCase.input}</div>
                                <div><strong>Output:</strong> ${testCase.output}</div>
                                <div><strong>Explanation:</strong> ${testCase.explanation}</div>
                            </div>
                        `).join('')}
                        
                        <h6 class="fw-bold">Key Insights</h6>
                        ${problem.keyInsights.map(insight => `
                            <div class="insight-item">
                                <i class="fas fa-lightbulb me-2 text-warning"></i>${insight}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="col-md-4">
                        <h6 class="fw-bold">Tags</h6>
                        <div class="mb-3">
                            ${problem.tags.map(tag => 
                                `<span class="badge bg-outline-secondary me-1 mb-1">${tag}</span>`
                            ).join('')}
                        </div>
                        
                        <h6 class="fw-bold">Complexity</h6>
                        <div class="mb-3">
                            <div><strong>Time:</strong> ${problem.timeComplexity}</div>
                            <div><strong>Space:</strong> ${problem.spaceComplexity}</div>
                        </div>
                        
                        <h6 class="fw-bold">Pseudocode</h6>
                        <div class="code-block mb-3">
                            <pre>${problem.pseudocode}</pre>
                        </div>
                        
                        <h6 class="fw-bold">Python Solution</h6>
                        <div class="code-block">
                            <pre>${problem.pythonCode}</pre>
                        </div>
                    </div>
                </div>
            `;

            const modal = new bootstrap.Modal(document.getElementById('problemModal'));
            modal.show();
        }

        function generateCards() {
            const selectedProblems = currentProblems.filter(p => p.status === 'Solved');
            if (selectedProblems.length === 0) {
                alert('No solved problems to generate cards for. Please solve some problems first!');
                return;
            }
            
            // Store selected problems for the cards page
            localStorage.setItem('selectedProblems', JSON.stringify(selectedProblems.map(p => p.id)));
            window.location.href = 'cards.html';
        }

        // Event listeners
        document.getElementById('apply-filters').addEventListener('click', applyFilters);
        document.getElementById('reset-filters').addEventListener('click', resetFilters);
        document.getElementById('generate-cards').addEventListener('click', generateCards);
        document.getElementById('search-input').addEventListener('input', applyFilters);
        document.getElementById('difficulty-filter').addEventListener('change', applyFilters);
        document.getElementById('tag-filter').addEventListener('change', applyFilters);
        document.getElementById('status-filter').addEventListener('change', applyFilters);

        // Check for selected problems from problems page
        window.addEventListener('load', () => {
            const selectedProblems = localStorage.getItem('selectedProblems');
            if (selectedProblems) {
                const problemIds = JSON.parse(selectedProblems);
                // Filter cards to show only those for selected problems
                currentProblems = sampleProblems.filter(card => problemIds.includes(card.id));
                localStorage.removeItem('selectedProblems');
                updateStats();
                renderProblems();
            }
            
            // Check for selected problem ID from home page
            const selectedProblemId = localStorage.getItem('selectedProblemId');
            if (selectedProblemId) {
                localStorage.removeItem('selectedProblemId');
                // Show the problem details modal automatically
                setTimeout(() => {
                    showProblemDetails(parseInt(selectedProblemId));
                }, 500); // Small delay to ensure page is fully loaded
            }
            
            // Check for tag filter from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const tagFilter = urlParams.get('tag');
            if (tagFilter) {
                // Set the tag filter dropdown
                document.getElementById('tag-filter').value = tagFilter;
                // Apply the filter
                applyFilters();
                // Update page title to show filtered tag
                document.title = `üìù ${tagFilter} Problems - LeetCode Anki Card Generator`;
                
                // Show tag filter indicator
                document.getElementById('tag-filter-indicator').style.display = 'block';
                document.getElementById('current-tag-filter').textContent = tagFilter;
            }
        });

        // Initialize
        populateTagFilter();
        updateStats();
        renderProblems();
    </script>
</body>
</html> 